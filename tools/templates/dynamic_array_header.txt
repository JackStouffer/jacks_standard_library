/**
 * AUTO GENERATED FILE
 *
 * This file contains the header for a dynamic array `{{ array_type_name }}` of
 * `{{ value_type_name }}` values.
 *
 * This file was auto generated from the array code generation utility that's part of
 * the "Jack's Standard Library" project. The utility generates a header file and a
 * C file for a type safe dynamic array . By generating the code rather than using macros,
 * two benefits are gained. One, the code is much easier to debug. Two, it's much more
 * obvious how much code you're generating, which means you are much less likely to accidentally
 * create the combinatoric explosion of code that's so common in C++ projects. Adding friction 
 * to things is actually good sometimes.
 */


#pragma once

#include <stdint.h>
#include <stddef.h>
#if !defined(__STDC_VERSION__) || __STDC_VERSION__ < 202311L
    #include <stdbool.h>
#endif

#include "jsl_core.h"

#ifdef __cplusplus
extern "C" {
#endif

/**
 * TODO: docs
 * 
 * Example:
 *
 * ```
 * {{ array_type_name }} array;
 * {{ function_prefix }}_init(&array, &arena);
 *
 * {{ function_prefix }}_insert(&array, ... );
 *
 * for (int64_t i = 0; i < array.length; ++i)
 * {
 *      {{ value_type_name }}* value = &array.data[i];
 *      ...
 * }
 * ```
 * 
 * ## Functions
 *
 *  * {{ function_prefix }}_init
 *
 */
typedef struct {{ array_type_name }} {
    // putting the sentinel first means it's much more likely to get
    // corrupted from accidental overwrites, therefore making it
    // more likely that memory bugs are caught.
    uint64_t sentinel;
    JSLArena* arena;
    {{ value_type_name }}* data;
    int64_t length;
    int64_t capacity;
} {{ array_type_name }};

/**
 * TODO: docs
 */
bool {{ function_prefix }}_init(
    {{ array_type_name }}* array,
    JSLArena* arena,
    int64_t initial_capacity
);

/**
 * TODO: docs
 */
bool {{ function_prefix }}_insert(
    {{ array_type_name }}* array,
    {{ value_type_name }} value
);

/**
 * TODO: docs
 */
bool {{ function_prefix }}_insert_at(
    {{ array_type_name }}* array,
    {{ value_type_name }} value,
    int64_t index
);

/**
 * TODO: docs
 */
bool {{ function_prefix }}_delete_at(
    {{ array_type_name }}* array,
    int64_t index
);

/**
 * TODO: docs
 */
void {{ function_prefix }}_clear(
    {{ array_type_name }}* array
);

#ifdef __cplusplus
}
#endif
